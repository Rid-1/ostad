var $d=document;function on(e,t,o,n){var a=e;if("object"==typeof a&&null!==a&&"string"==typeof a.id)a.addEventListener(t,function(e){e=e.target.closest(o);"object"==typeof e&&null!==e&&(e.fn=n,e.fn(e))});else if("object"==typeof a&&null!==a&&"number"==typeof a.length)for(var r=0;r<a.length;r++)a[r].addEventListener(t,function(e){e=e.target.closest(o);"object"==typeof e&&null!==e&&(e.fn=n,e.fn(e))})}String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===e.toString().toLowerCase()?this.replace(e,t):decodeURIComponent(encodeURIComponent(this).replace(new RegExp(encodeURIComponent(e),"g"),t))}),"undefined"!=typeof Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),$d.addEventListener("DOMContentLoaded",function(){for(var e=$d.querySelectorAll(".page-type-item .post-body a[href]"),t=["facebook.com","ostad.ma","youtube.com, twitter.com"],o=0;o<e.length;o++){for(var n=e[o].getAttribute("href"),a=!1,r=0;r<t.length;r++)if(n.includes(t[r])){a=!0;break}a||(e[o].setAttribute("href","https://fr.ostad.ma/p/pl.html?l="+n),e[o].setAttribute("rel","nofollow"))}lazyloadImgs();var l=$d.querySelector(".load-more button");null!==l&&l.addEventListener("click",function(e){var t=e.target.closest(".widget").querySelector(".blog-posts"),o=(parseInt(t.getAttribute("data-max-posts")),t.querySelectorAll(".post-outer")),n=o[o.length-1].getAttribute("data-post-date"),a=l.closest(".load-more"),e="";if(window.location.pathname.startsWith("/search/label/"))e=window.location.pathname+"?";else if("/"==window.location.pathname||window.location.pathname.startsWith("/search")||0<=$d.body.className.indexOf("page-type-archive")){e="/search?";const r=new URLSearchParams(window.location.search);window.location.pathname.startsWith("/search")&&null!==r.get("q")&&(e+="q="+r.get("q"))}e+="&updated-max="+n,e+="&start="+o.length,e+=0<=window.location.href.indexOf("by-date=true")?"&by-date=true":"",a.querySelector(".loading").classList.remove("hide"),l.style.display="none";o=new XMLHttpRequest;o.postsContainer=t,o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=this.response,e=(new DOMParser).parseFromString(e,"text/html"),t=e.querySelectorAll("#main .blog-posts > .post-outer, #main .blog-posts > .inline-ad");if(a.querySelector(".loading").classList.add("hide"),0<t.length){for(var o=0;o<t.length;o++)this.postsContainer.insertAdjacentHTML("beforeend",t[o].outerHTML);lazyloadImgs()}else $d.querySelector("#main .load-more").style.display="none";null!==e.querySelector("#main .load-more")?l.style.display="initial":a.style.display="none"}},o.open("GET",e,!0),o.send()});var s=$d.querySelector(".search > button");null!==s&&s.addEventListener("click",function(e){e=e.target.closest(".search").querySelector(".search-pop-out");null!==e&&e.classList.add("show-on-mobile")});s=$d.querySelector(".search button.close-btn");null!==s&&s.addEventListener("click",function(e){e=e.target.closest(".search-pop-out");null!==e&&e.classList.remove("show-on-mobile")}),loadSimilarPosts()}),window.addEventListener("resize",function(){lazyloadImgs()});var onScrollTimer=null;function lazyloadImgs(){for(var e=$d.querySelectorAll("img[data-src]"),t=0;t<e.length;t++)isElementVisible(e[t])&&setTimeout(function(e){var t=e.getAttribute("data-src");isElementVisible(e)&&null!=t&&(e.setAttribute("src",t),e.removeAttribute("data-src"))},150,e[t])}function loadSimilarPosts(){var o,e,t;$d.body.classList.contains("page-type-item")&&(t=$d.querySelector("#breadcrumb a:last-child"),o=t.textContent,e=t.getAttribute("href"),(t=new XMLHttpRequest).onreadystatechange=function(){var e,t;4==this.readyState&&200==this.status&&(e="",t=this.response,t=(new DOMParser).parseFromString(t,"text/html"),e+='<div class="container-outer widget">',e+="<h2>Plus de "+o+"</h2>",e+=t.querySelector("main .blog-posts").outerHTML,e+="</div>",$d.querySelector("main").insertAdjacentHTML("afterend",e))},t.open("GET",e,!0),t.send()),lazyloadImgs()}function isElementVisible(e,t,o){t=t||0,o=o||"visible";var n=e.getBoundingClientRect(),a=Math.min(document.documentElement.clientHeight,window.innerHeight),e=n.bottom-t<0,t=0<=n.top-a+t;return"top"===o?e:"bottom"===o?t:!e&&!t}function isValidJSON(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t)return t}catch(e){return!1}return!0}window.onscroll=function(){null!==onScrollTimer&&clearTimeout(onScrollTimer),onScrollTimer=setTimeout(function(){lazyloadImgs()},150)};var mainEl=$d.querySelector(".page-type-index main, .page-type-item main"),headerAd="<ins class='adsbygoogle' style='display:block' data-ad-client='ca-pub-6816032880863765' data-ad-slot='2055338571' data-ad-format='auto' data-full-width-responsive='true'></ins>";function loadAds(){mainEl.insertAdjacentHTML("afterend",'<div class="container-outer ad-container">'+headerAd+"</div>"),(adsbygoogle=window.adsbygoogle||[]).push({}),window.removeEventListener("scroll",loadAds)}null!==mainEl&&window.addEventListener("scroll",loadAds);
